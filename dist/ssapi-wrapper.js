!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.SSAPI=t():e.SSAPI=t()}(this,function(){return n={},__webpack_require__.m=r=[function(e,t,r){"use strict";function A(e,t){for(var r=t&&t.plainObjects?Object.create(null):{},n=0;n<e.length;++n)void 0!==e[n]&&(r[n]=e[n]);return r}function B(n,o,i){if(!o)return n;if("object"!=typeof o){if(l(n))n.push(o);else{if(!n||"object"!=typeof n)return[n,o];(i&&(i.plainObjects||i.allowPrototypes)||!a.call(Object.prototype,o))&&(n[o]=!0)}return n}if(!n||"object"!=typeof n)return[n].concat(o);var e=n;return l(n)&&!l(o)&&(e=A(n,i)),l(n)&&l(o)?(o.forEach(function(e,t){var r;a.call(n,t)?(r=n[t])&&"object"==typeof r&&e&&"object"==typeof e?n[t]=B(r,e,i):n.push(e):n[t]=e}),n):Object.keys(o).reduce(function(e,t){var r=o[t];return a.call(e,t)?e[t]=B(e[t],r,i):e[t]=r,e},e)}var a=Object.prototype.hasOwnProperty,l=Array.isArray,s=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}();e.exports={arrayToObject:A,assign:function(e,r){return Object.keys(r).reduce(function(e,t){return e[t]=r[t],e},e)},combine:function(e,t){return[].concat(e,t)},compact:function(e){for(var t=[{obj:{o:e},prop:"o"}],r=[],n=0;n<t.length;++n)for(var o=t[n],i=o.obj[o.prop],a=Object.keys(i),s=0;s<a.length;++s){var u=a[s],c=i[u];"object"==typeof c&&null!==c&&-1===r.indexOf(c)&&(t.push({obj:i,prop:u}),r.push(c))}return function(e){for(;1<e.length;){var t=e.pop(),r=t.obj[t.prop];if(l(r)){for(var n=[],o=0;o<r.length;++o)void 0!==r[o]&&n.push(r[o]);t.obj[t.prop]=n}}}(t),e},decode:function(e,t,r){var n=e.replace(/\+/g," ");if("iso-8859-1"===r)return n.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(n)}catch(e){return n}},encode:function(e,t,r){if(0===e.length)return e;var n=e;if("symbol"==typeof e?n=Symbol.prototype.toString.call(e):"string"!=typeof e&&(n=String(e)),"iso-8859-1"===r)return escape(n).replace(/%u[0-9a-f]{4}/gi,function(e){return"%26%23"+parseInt(e.slice(2),16)+"%3B"});for(var o="",i=0;i<n.length;++i){var a=n.charCodeAt(i);45===a||46===a||95===a||126===a||48<=a&&a<=57||65<=a&&a<=90||97<=a&&a<=122?o+=n.charAt(i):a<128?o+=s[a]:a<2048?o+=s[192|a>>6]+s[128|63&a]:a<55296||57344<=a?o+=s[224|a>>12]+s[128|a>>6&63]+s[128|63&a]:(i+=1,a=65536+((1023&a)<<10|1023&n.charCodeAt(i)),o+=s[240|a>>18]+s[128|a>>12&63]+s[128|a>>6&63]+s[128|63&a])}return o},isBuffer:function(e){return!(!e||"object"!=typeof e)&&!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},isRegExp:function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},maybeMap:function(e,t){if(l(e)){for(var r=[],n=0;n<e.length;n+=1)r.push(t(e[n]));return r}return t(e)},merge:B}},function(e,t,r){"use strict";var n=String.prototype.replace,o=/%20/g,i=r(0),r={RFC1738:"RFC1738",RFC3986:"RFC3986"};e.exports=i.assign({default:r.RFC3986,formatters:{RFC1738:function(e){return n.call(e,o,"+")},RFC3986:function(e){return String(e)}}},r)},function(e,t,r){"use strict";var n=r(4),o=r(5),r=r(1);e.exports={formats:r,parse:o,stringify:n}},function(e,t,r){e.exports=r(7)},function(e,t,r){"use strict";function lb(e,t){n.apply(e,_(t)?t:[t])}function qb(e,t,r,n,o,i,a,s,u,c,l,f,p){var d=e;if("function"==typeof a?d=a(t,d):d instanceof Date?d=c(d):"comma"===r&&_(d)&&(d=g.maybeMap(d,function(e){return e instanceof Date?c(e):e}).join(",")),null===d){if(n)return i&&!f?i(t,w.encoder,p,"key"):t;d=""}if(e=d,"string"==typeof e||"number"==typeof e||"boolean"==typeof e||"symbol"==typeof e||"bigint"==typeof e||g.isBuffer(d))return i?[l(f?t:i(t,w.encoder,p,"key"))+"="+l(i(d,w.encoder,p,"value"))]:[l(t)+"="+l(String(d))];var y,h=[];if(void 0===d)return h;y=_(a)?a:(e=Object.keys(d),s?e.sort(s):e);for(var b=0;b<y.length;++b){var v=y[b],m=d[v];o&&null===m||(v=_(d)?"function"==typeof r?r(t,v):t:t+(u?"."+v:"["+v+"]"),lb(h,qb(m,v,r,n,o,i,a,s,u,c,l,f,p)))}return h}var g=r(0),c=r(1),l=Object.prototype.hasOwnProperty,f={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},_=Array.isArray,n=Array.prototype.push,o=Date.prototype.toISOString,r=c.default,w={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:g.encode,encodeValuesOnly:!1,format:r,formatter:c.formatters[r],indices:!1,serializeDate:function(e){return o.call(e)},skipNulls:!1,strictNullHandling:!1};e.exports=function(e,t){var r=e,n=function(e){if(!e)return w;if(null!==e.encoder&&void 0!==e.encoder&&"function"!=typeof e.encoder)throw new TypeError("Encoder has to be a function.");var t=e.charset||w.charset;if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var r=c.default;if(void 0!==e.format){if(!l.call(c.formatters,e.format))throw new TypeError("Unknown format option provided.");r=e.format}var n=c.formatters[r],r=w.filter;return"function"!=typeof e.filter&&!_(e.filter)||(r=e.filter),{addQueryPrefix:("boolean"==typeof e.addQueryPrefix?e:w).addQueryPrefix,allowDots:void 0===e.allowDots?w.allowDots:!!e.allowDots,charset:t,charsetSentinel:("boolean"==typeof e.charsetSentinel?e:w).charsetSentinel,delimiter:(void 0===e.delimiter?w:e).delimiter,encode:("boolean"==typeof e.encode?e:w).encode,encoder:("function"==typeof e.encoder?e:w).encoder,encodeValuesOnly:("boolean"==typeof e.encodeValuesOnly?e:w).encodeValuesOnly,filter:r,formatter:n,serializeDate:("function"==typeof e.serializeDate?e:w).serializeDate,skipNulls:("boolean"==typeof e.skipNulls?e:w).skipNulls,sort:"function"==typeof e.sort?e.sort:null,strictNullHandling:("boolean"==typeof e.strictNullHandling?e:w).strictNullHandling}}(t);"function"==typeof n.filter?r=(0,n.filter)("",r):_(n.filter)&&(a=n.filter);var o=[];if("object"!=typeof r||null===r)return"";e=t&&t.arrayFormat in f?t.arrayFormat:!(t&&"indices"in t)||t.indices?"indices":"repeat";var i=f[e],a=a||Object.keys(r);n.sort&&a.sort(n.sort);for(var s=0;s<a.length;++s){var u=a[s];n.skipNulls&&null===r[u]||lb(o,qb(r[u],u,i,n.strictNullHandling,n.skipNulls,n.encode?n.encoder:null,n.filter,n.sort,n.allowDots,n.serializeDate,n.formatter,n.encodeValuesOnly,n.charset))}t=o.join(n.delimiter),e=!0===n.addQueryPrefix?"?":"";return n.charsetSentinel&&("iso-8859-1"===n.charset?e+="utf8=%26%2310003%3B&":e+="utf8=%E2%9C%93&"),0<t.length?e+t:""}},function(e,t,r){"use strict";function vc(e,t){return e&&"string"==typeof e&&t.comma&&-1<e.indexOf(",")?e.split(","):e}function yc(e,t){var r,n,o,i,a={},s=t.ignoreQueryPrefix?e.replace(/^\?/,""):e,e=t.parameterLimit===1/0?void 0:t.parameterLimit,u=s.split(t.delimiter,e),c=-1,l=t.charset;if(t.charsetSentinel)for(r=0;r<u.length;++r)0===u[r].indexOf("utf8=")&&("utf8=%E2%9C%93"===u[r]?l="utf-8":"utf8=%26%2310003%3B"===u[r]&&(l="iso-8859-1"),c=r,r=u.length);for(r=0;r<u.length;++r)r!==c&&((i=-1===(i=-1===(i=(n=u[r]).indexOf("]="))?n.indexOf("="):i+1)?(o=t.decoder(n,y.decoder,l,"key"),t.strictNullHandling?null:""):(o=t.decoder(n.slice(0,i),y.decoder,l,"key"),f.maybeMap(vc(n.slice(i+1),t),function(e){return t.decoder(e,y.decoder,l,"value")})))&&t.interpretNumericEntities&&"iso-8859-1"===l&&(i=i.replace(/&#(\d+);/g,function(e,t){return String.fromCharCode(parseInt(t,10))})),-1<n.indexOf("[]=")&&(i=d(i)?[i]:i),p.call(a,o)?a[o]=f.combine(a[o],i):a[o]=i);return a}function Ac(e,t,r,n){if(e){var o=r.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,i=/(\[[^[\]]*])/g,a=0<r.depth&&/(\[[^[\]]*])/.exec(o),e=a?o.slice(0,a.index):o,s=[];if(e){if(!r.plainObjects&&p.call(Object.prototype,e)&&!r.allowPrototypes)return;s.push(e)}for(var u=0;0<r.depth&&null!==(a=i.exec(o))&&u<r.depth;){if(u+=1,!r.plainObjects&&p.call(Object.prototype,a[1].slice(1,-1))&&!r.allowPrototypes)return;s.push(a[1])}return a&&s.push("["+o.slice(a.index)+"]"),function(e,t,r,n){for(var o=n?t:vc(t,r),i=e.length-1;0<=i;--i){var a,s,u,c=e[i];"[]"===c&&r.parseArrays?a=[].concat(o):(a=r.plainObjects?Object.create(null):{},s="["===c.charAt(0)&&"]"===c.charAt(c.length-1)?c.slice(1,-1):c,u=parseInt(s,10),r.parseArrays||""!==s?!isNaN(u)&&c!==s&&String(u)===s&&0<=u&&r.parseArrays&&u<=r.arrayLimit?(a=[])[u]=o:a[s]=o:a={0:o}),o=a}return o}(s,t,r,n)}}var f=r(0),p=Object.prototype.hasOwnProperty,d=Array.isArray,y={allowDots:!1,allowPrototypes:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:f.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1};e.exports=function(e,t){var r=function(e){if(!e)return y;if(null!==e.decoder&&void 0!==e.decoder&&"function"!=typeof e.decoder)throw new TypeError("Decoder has to be a function.");if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var t=(void 0===e.charset?y:e).charset;return{allowDots:void 0===e.allowDots?y.allowDots:!!e.allowDots,allowPrototypes:("boolean"==typeof e.allowPrototypes?e:y).allowPrototypes,arrayLimit:("number"==typeof e.arrayLimit?e:y).arrayLimit,charset:t,charsetSentinel:("boolean"==typeof e.charsetSentinel?e:y).charsetSentinel,comma:("boolean"==typeof e.comma?e:y).comma,decoder:("function"==typeof e.decoder?e:y).decoder,delimiter:("string"==typeof e.delimiter||f.isRegExp(e.delimiter)?e:y).delimiter,depth:"number"==typeof e.depth||!1===e.depth?+e.depth:y.depth,ignoreQueryPrefix:!0===e.ignoreQueryPrefix,interpretNumericEntities:("boolean"==typeof e.interpretNumericEntities?e:y).interpretNumericEntities,parameterLimit:("number"==typeof e.parameterLimit?e:y).parameterLimit,parseArrays:!1!==e.parseArrays,plainObjects:("boolean"==typeof e.plainObjects?e:y).plainObjects,strictNullHandling:("boolean"==typeof e.strictNullHandling?e:y).strictNullHandling}}(t);if(""===e||null==e)return r.plainObjects?Object.create(null):{};for(var n="string"==typeof e?yc(e,r):e,o=r.plainObjects?Object.create(null):{},i=Object.keys(n),a=0;a<i.length;++a)var s=i[a],s=Ac(s,n[s],r,"string"==typeof e),o=f.merge(o,s,r);return f.compact(o)}},function(e,t){!function(){if("undefined"!=typeof window)try{var e=new window.CustomEvent("test",{cancelable:!0});if(e.preventDefault(),!0!==e.defaultPrevented)throw new Error("Could not prevent default")}catch(e){function Dd(e,t){var r,n;return(t=t||{}).bubbles=!!t.bubbles,t.cancelable=!!t.cancelable,(r=document.createEvent("CustomEvent")).initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n=r.preventDefault,r.preventDefault=function(){n.call(this);try{Object.defineProperty(this,"defaultPrevented",{get:function(){return!0}})}catch(e){this.defaultPrevented=!0}},r}Dd.prototype=window.Event.prototype,window.CustomEvent=Dd}}()},function(e,t,r){"use strict";function _toConsumableArray(e){return function(e){if(Array.isArray(e))return _arrayLikeToArray(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return _arrayLikeToArray(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _arrayLikeToArray(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ownKeys(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(Object(r),!0).forEach(function(e){_defineProperty(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}r.r(t),r.d(t,"Client",function(){return u}),r.d(t,"createPages",function(){return c});var n={resultsFormat:"native"},o=function(){function State(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=2<arguments.length&&void 0!==arguments[2]&&arguments[2];!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,State),this.siteId=e,this.defaultParams=_objectSpread(_objectSpread({siteId:this.siteId},n),t),this.params=_objectSpread({},this.defaultParams),this.filters=[],this.sorting={},this.debug=r,this.lockedState={}}var e,t,r;return e=State,(t=[{key:"_compareFilterRanges",value:function(e,t){return e[0]==t[0]&&e[1]==t[1]}},{key:"_compareFilterValues",value:function(e,t){var r=Array.isArray(e),n=Array.isArray(t);return r&&n?this._compareFilterRanges(e,t):!r&&!n&&e==t}},{key:"_outputFilters",value:function(){return this.filters.reduce(function(e,t){var r="".concat(t.type,".").concat(t.field);if(Array.isArray(t.value)){var n="".concat(r,".low"),o="".concat(r,".high");return _objectSpread(_objectSpread(_objectSpread({},e),null!=t.value[0]&&_defineProperty({},n,Array.isArray(e[n])?e[n].concat([t.value[0]]):[t.value[0]])),null!=t.value[1]&&_defineProperty({},o,Array.isArray(e[o])?e[o].concat([t.value[1]]):[t.value[1]]))}return e[r]=e[r]||[],e[r].push(t.value),e},{})}},{key:"_outputSort",value:function(){if(this.sorting.field&&this.sorting.direction)return _defineProperty({},"sort.".concat(this.sorting.field),this.sorting.direction)}},{key:"_transformFilterType",value:function(e){return e?"bgfilter":"filter"}},{key:"addFilter",value:function(e,t,r){r=2<arguments.length&&void 0!==r&&r;if(null==e)throw new TypeError("[SSAPI][State].addFilter - `field` is undefined.");if(null==t)throw new TypeError("[SSAPI][State].addFilter - `value` is undefined.");r={field:e,value:t,type:this._transformFilterType(r)};return this.filters.push(r),this}},{key:"removeFilter",value:function(t,r,e){var n=this,e=2<arguments.length&&void 0!==e&&e;if(null==t)throw new TypeError("[SSAPI][State].removeFilter - `field` is undefined.");if(null==r)throw new TypeError("[SSAPI][State].removeFilter - `value` is undefined.");var o=this._transformFilterType(e);return this.filters=this.filters.filter(function(e){return!(e.field==t&&e.type==o&&n._compareFilterValues(e.value,r))}),this}},{key:"toggleFilter",value:function(t,r,e){var n=this,e=2<arguments.length&&void 0!==e&&e;if(null==t)throw new TypeError("[SSAPI][State].toggleFilter - `field` is undefined.");if(null==r)throw new TypeError("[SSAPI][State].toggleFilter - `value` is undefined.");var o=this._transformFilterType(e);return this.filters.find(function(e){return e.field==t&&e.type==o&&n._compareFilterValues(e.value,r)})?this.removeFilter(t,r,e):this.addFilter(t,r,e)}},{key:"query",value:function(e){return this.params.q=e,this}},{key:"perPage",value:function(e){return this.params.resultsPerPage=e,this}},{key:"page",value:function(e){return this.params.page=e,this}},{key:"sort",value:function(e,t){t=1<arguments.length&&void 0!==t?t:"asc";if(null==e)throw new TypeError('[SSAPI][State].sort - "field" is undefined.');return this.sorting={field:e,direction:t},this}},{key:"lock",value:function(){return this.lockedState={params:_objectSpread({},this.params),filters:_toConsumableArray(this.filters),sorting:_objectSpread({},this.sorting)},this}},{key:"reset",value:function(){return this.params=this.lockedState.params?_objectSpread({},this.lockedState.params):_objectSpread({},this.defaultParams),this.filters=this.lockedState.filters?_toConsumableArray(this.lockedState.filters):[],this.sorting=this.lockedState.sorting?_objectSpread({},this.lockedState.sorting):{},this}},{key:"clearFacets",value:function(){return this.filters=this.filters.filter(function(e){return!("filter"==e.type)}),this}},{key:"other",value:function(e,t){return this.params[e]=t,this}},{key:"output",get:function(){return _objectSpread(_objectSpread(_objectSpread({},this.params),this._outputFilters()),this._outputSort())}}])&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),State}(),t=r(2),i=r.n(t);function RequestCache_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Request_ownKeys(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function Request_objectSpread(n){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?Request_ownKeys(Object(o),!0).forEach(function(e){var t,r;t=n,e=o[r=e],r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):Request_ownKeys(Object(o)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(o,e))})}return n}function Request_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var s=new(function(){function RequestCache(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1e3;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,RequestCache),this.store=new Map,this.throttleTime=e}var e,t,r;return e=RequestCache,(t=[{key:"access",value:function(e){var t=this.store.get(e);if(t){var r=Date.now();return t.timestamp-r>this.throttleTime?this.remove(e):t.data}return null}},{key:"insert",value:function(e,t){t={timestamp:Date.now(),data:t};return this.store.set(e,t),!0}},{key:"purge",value:function(){return this.store.clear(),!0}},{key:"remove",value:function(e){return this.store.delete(e)}}])&&RequestCache_defineProperties(e.prototype,t),r&&RequestCache_defineProperties(e,r),RequestCache}())(3e4),a=function(){function Request(e,t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Request),this.endpoint=e,this.method=t,this.params=r}var e,t,r;return e=Request,(t=[{key:"serializeParams",value:function(e){return i.a.stringify(e,{arrayFormat:"repeat"})}},{key:"buildUrl",value:function(e,t){return(-1<e.indexOf("?")?"".concat(e):"".concat(e,"?")).concat(t)}},{key:"send",value:function(){var a=this;return new Promise(function(t,r){var n=a.serializeParams(Request_objectSpread({},a.params)),o=a.buildUrl(a.endpoint,n),e=s.access(o);if(null!=e)return t(e);var i=new XMLHttpRequest;i.open("GET",o),i.responseType="json",i.send(),i.onreadystatechange=function(){var e;4==i.readyState&&(200==i.status?(e={response:{status:i.status,responseURL:i.responseURL,responseType:i.responseType,data:"object"==_typeof(i.response)?i.response:JSON.parse(i.response)},requestParams:Request_objectSpread({},a.params),requestQueryString:n},s.insert(o,e),t(e)):(console.error("[SSAPI][Request].send - Error with response.","Code: ".concat(i.status,".")),r(i)))}})}}])&&Request_defineProperties(e.prototype,t),r&&Request_defineProperties(e,r),Request}();r(6);function Client_typeof(e){return(Client_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Client_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var u=function(){function Client(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=2<arguments.length&&void 0!==arguments[2]&&arguments[2];if(!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Client),null==e)throw new TypeError("[SSAPI][Client].constructor - `siteId` is undefined.");this.state=new o(e,t,r),this.endpoint="https://".concat(e,".a.searchspring.io/api/search/search.json"),this.method="GET",this.events=["search"],this.bus=document.createElement("div"),this.debug=r,this.stateSetFromFunction=!1}var e,t,r;return e=Client,(t=[{key:"search",value:function(){var t=this;return new a(this.endpoint,this.method,this.state.output).send().then(function(e){return t.bus.dispatchEvent(new CustomEvent("search",{detail:e})),t.stateSetFromFunction&&(t.stateSetFromFunction=!1,t.state.filters=t.state.filters.filter(function(e){return"bgfilter"===e.type}),e.response.data&&e.response.data.filterSummary&&0<e.response.data.filterSummary.length&&e.response.data.filterSummary.map(function(e){t.filter(e.field,"object"===Client_typeof(e.value)?[e.value.rangeLow,e.value.rangeHigh]:e.value)})),e})}},{key:"on",value:function(e,t){if(-1===this.events.indexOf(e))throw new Error('[SSAPI][Client].on - Event "'.concat(e,'" does not exist.'));this.bus.addEventListener(e,t,!1)}},{key:"off",value:function(e,t){if(-1===this.events.indexOf(e))throw new Error('[SSAPI][Client].off - Event "'.concat(e,'" does not exist.'));this.bus.removeEventListener(e,t,!1)}},{key:"setState",value:function(t){var o=this;if(null==t)throw new TypeError("[SSAPI][Client].setState - `state` is undefined.");var e,r=[{pattern:/^sort\.(.*)$/,fn:"sort",match:1},{pattern:/^filter\.(.*)$/,fn:"filter",match:1},{pattern:/^bgfilter\.(.*)$/,fn:"backgroundFilter",match:1}];for(e in t)!function(e){var n=t[e];switch(e){case"q":o.query(n,!1);break;case"resultsPerPage":o.perPage(n,!1);break;case"page":o.page(n);break;default:if(!r.some(function(t){var r=e.match(t.pattern);if(r)return Array.isArray(n)?n.map(function(e){null!=e&&o[t.fn](r[t.match],e,!1)}):null!=n&&o[t.fn](r[t.match],n,!1),!0})){o.other(e,n);break}}}(e);return this.stateSetFromFunction=!0,this}},{key:"other",value:function(e,t){return this.state.other(e,t),this}},{key:"reset",value:function(){return this.state.reset(),this}},{key:"lock",value:function(){return this.state.lock(),this}},{key:"clearFacets",value:function(e){return(!(0<arguments.length&&void 0!==e)||e)&&this.state.page(1),this.state.clearFacets(),this}},{key:"clearFilters",value:function(e){return this.clearFacets(e),this}},{key:"perPage",value:function(e,t){return(!(1<arguments.length&&void 0!==t)||t)&&this.state.page(1),this.state.perPage(e),this}},{key:"page",value:function(e){return this.state.page(e),this}},{key:"sort",value:function(e,t){return this.debug&&console.trace("[SSAPI][Client].sort - field: ".concat(e," | direction: ").concat(t)),this.state.sort(e,t),this}},{key:"filter",value:function(e,t,r){return(!(2<arguments.length&&void 0!==r)||r)&&this.state.page(1),this.state.toggleFilter(e,t,!1),this}},{key:"facet",value:function(e,t,r){return this.filter(e,t,r),this}},{key:"backgroundFilter",value:function(e,t,r){return(!(2<arguments.length&&void 0!==r)||r)&&this.state.page(1),this.state.toggleFilter(e,t,!0),this}},{key:"backgroundFacet",value:function(e,t,r){return this.backgroundFilter(e,t,r),this}},{key:"query",value:function(e,t){return(!(1<arguments.length&&void 0!==t)||t)&&this.state.page(1),this.state.query(e),this}}])&&Client_defineProperties(e.prototype,t),r&&Client_defineProperties(e,r),Client}(),c=function(e){for(var t=[],r=1;r<=e.totalPages;r++)t.push(r);return t}}],__webpack_require__.c=n,__webpack_require__.d=function(e,t,r){__webpack_require__.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},__webpack_require__.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.t=function(t,e){if(1&e&&(t=__webpack_require__(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(__webpack_require__.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)__webpack_require__.d(r,n,function(e){return t[e]}.bind(null,n));return r},__webpack_require__.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return __webpack_require__.d(t,"a",t),t},__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=3);function __webpack_require__(e){if(n[e])return n[e].exports;var t=n[e]={i:e,l:!1,exports:{}};return r[e].call(t.exports,t,t.exports,__webpack_require__),t.l=!0,t.exports}var r,n});
//# sourceMappingURL=ssapi-wrapper.js.map