!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.SSAPI=t():e.SSAPI=t()}(this,function(){return n={},__webpack_require__.m=r=[function(e,t,r){"use strict";function A(e,t){for(var r=t&&t.plainObjects?Object.create(null):{},n=0;n<e.length;++n)void 0!==e[n]&&(r[n]=e[n]);return r}var a=Object.prototype.hasOwnProperty,l=Array.isArray,u=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}();e.exports={arrayToObject:A,assign:function(e,r){return Object.keys(r).reduce(function(e,t){return e[t]=r[t],e},e)},combine:function(e,t){return[].concat(e,t)},compact:function(e){for(var t=[{obj:{o:e},prop:"o"}],r=[],n=0;n<t.length;++n)for(var o=t[n],i=o.obj[o.prop],a=Object.keys(i),u=0;u<a.length;++u){var s=a[u],c=i[s];"object"==typeof c&&null!==c&&-1===r.indexOf(c)&&(t.push({obj:i,prop:s}),r.push(c))}return function(e){for(;1<e.length;){var t=e.pop(),r=t.obj[t.prop];if(l(r)){for(var n=[],o=0;o<r.length;++o)void 0!==r[o]&&n.push(r[o]);t.obj[t.prop]=n}}}(t),e},decode:function(e,t,r){var n=e.replace(/\+/g," ");if("iso-8859-1"===r)return n.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(n)}catch(e){return n}},encode:function(e,t,r){if(0===e.length)return e;var n="string"==typeof e?e:String(e);if("iso-8859-1"===r)return escape(n).replace(/%u[0-9a-f]{4}/gi,function(e){return"%26%23"+parseInt(e.slice(2),16)+"%3B"});for(var o="",i=0;i<n.length;++i){var a=n.charCodeAt(i);45===a||46===a||95===a||126===a||48<=a&&a<=57||65<=a&&a<=90||97<=a&&a<=122?o+=n.charAt(i):a<128?o+=u[a]:a<2048?o+=u[192|a>>6]+u[128|63&a]:a<55296||57344<=a?o+=u[224|a>>12]+u[128|a>>6&63]+u[128|63&a]:(i+=1,a=65536+((1023&a)<<10|1023&n.charCodeAt(i)),o+=u[240|a>>18]+u[128|a>>12&63]+u[128|a>>6&63]+u[128|63&a])}return o},isBuffer:function(e){return!(!e||"object"!=typeof e)&&!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},isRegExp:function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},merge:function merge(n,o,i){if(!o)return n;if("object"!=typeof o){if(l(n))n.push(o);else{if(!n||"object"!=typeof n)return[n,o];(i&&(i.plainObjects||i.allowPrototypes)||!a.call(Object.prototype,o))&&(n[o]=!0)}return n}if(!n||"object"!=typeof n)return[n].concat(o);var e=n;return l(n)&&!l(o)&&(e=A(n,i)),l(n)&&l(o)?(o.forEach(function(e,t){if(a.call(n,t)){var r=n[t];r&&"object"==typeof r&&e&&"object"==typeof e?n[t]=merge(r,e,i):n.push(e)}else n[t]=e}),n):Object.keys(o).reduce(function(e,t){var r=o[t];return a.call(e,t)?e[t]=merge(e[t],r,i):e[t]=r,e},e)}}},function(e,t,r){"use strict";var n=String.prototype.replace,o=/%20/g;e.exports={default:"RFC3986",formatters:{RFC1738:function(e){return n.call(e,o,"+")},RFC3986:function(e){return e}},RFC1738:"RFC1738",RFC3986:"RFC3986"}},function(e,t,r){"use strict";var n=r(5),o=r(6),i=r(1);e.exports={formats:i,parse:o,stringify:n}},function(e,t,r){e.exports=r(7)},function(e,t,r){var n=function(i){"use strict";var u,e=Object.prototype,s=e.hasOwnProperty,t="function"==typeof Symbol?Symbol:{},o=t.iterator||"@@iterator",r=t.asyncIterator||"@@asyncIterator",n=t.toStringTag||"@@toStringTag";function wrap(e,t,r,n){var o=t&&t.prototype instanceof Generator?t:Generator,i=Object.create(o.prototype),a=new Context(n||[]);return i._invoke=function(i,a,u){var s=c;return function(e,t){if(s===f)throw new Error("Generator is already running");if(s===p){if("throw"===e)throw t;return doneResult()}for(u.method=e,u.arg=t;;){var r=u.delegate;if(r){var n=maybeInvokeDelegate(r,u);if(n){if(n===h)continue;return n}}if("next"===u.method)u.sent=u._sent=u.arg;else if("throw"===u.method){if(s===c)throw s=p,u.arg;u.dispatchException(u.arg)}else"return"===u.method&&u.abrupt("return",u.arg);s=f;var o=tryCatch(i,a,u);if("normal"===o.type){if(s=u.done?p:l,o.arg===h)continue;return{value:o.arg,done:u.done}}"throw"===o.type&&(s=p,u.method="throw",u.arg=o.arg)}}}(e,r,a),i}function tryCatch(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}i.wrap=wrap;var c="suspendedStart",l="suspendedYield",f="executing",p="completed",h={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var a={};a[o]=function(){return this};var y=Object.getPrototypeOf,d=y&&y(y(values([])));d&&d!==e&&s.call(d,o)&&(a=d);var v=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(a);function defineIteratorMethods(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function AsyncIterator(u){var e;this._invoke=function(r,n){function callInvokeWithMethodAndArg(){return new Promise(function(e,t){!function invoke(e,t,r,n){var o=tryCatch(u[e],u,t);if("throw"!==o.type){var i=o.arg,a=i.value;return a&&"object"==typeof a&&s.call(a,"__await")?Promise.resolve(a.__await).then(function(e){invoke("next",e,r,n)},function(e){invoke("throw",e,r,n)}):Promise.resolve(a).then(function(e){i.value=e,r(i)},function(e){return invoke("throw",e,r,n)})}n(o.arg)}(r,n,e,t)})}return e=e?e.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}}function maybeInvokeDelegate(e,t){var r=e.iterator[t.method];if(r===u){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=u,maybeInvokeDelegate(e,t),"throw"===t.method))return h;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var n=tryCatch(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,h;var o=n.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=u),t.delegate=null,h):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,h)}function pushTryEntry(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function resetTryEntry(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function Context(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(pushTryEntry,this),this.reset(!0)}function values(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function next(){for(;++r<e.length;)if(s.call(e,r))return next.value=e[r],next.done=!1,next;return next.value=u,next.done=!0,next};return n.next=n}}return{next:doneResult}}function doneResult(){return{value:u,done:!0}}return GeneratorFunction.prototype=v.constructor=GeneratorFunctionPrototype,GeneratorFunctionPrototype.constructor=GeneratorFunction,GeneratorFunctionPrototype[n]=GeneratorFunction.displayName="GeneratorFunction",i.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===GeneratorFunction||"GeneratorFunction"===(t.displayName||t.name))},i.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,GeneratorFunctionPrototype):(e.__proto__=GeneratorFunctionPrototype,n in e||(e[n]="GeneratorFunction")),e.prototype=Object.create(v),e},i.awrap=function(e){return{__await:e}},defineIteratorMethods(AsyncIterator.prototype),AsyncIterator.prototype[r]=function(){return this},i.AsyncIterator=AsyncIterator,i.async=function(e,t,r,n){var o=new AsyncIterator(wrap(e,t,r,n));return i.isGeneratorFunction(t)?o:o.next().then(function(e){return e.done?e.value:o.next()})},defineIteratorMethods(v),v[n]="Generator",v[o]=function(){return this},v.toString=function(){return"[object Generator]"},i.keys=function(t){var r=[];for(var e in t)r.push(e);return r.reverse(),function next(){for(;r.length;){var e=r.pop();if(e in t)return next.value=e,next.done=!1,next}return next.done=!0,next}},i.values=values,Context.prototype={constructor:Context,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=u,this.done=!1,this.delegate=null,this.method="next",this.arg=u,this.tryEntries.forEach(resetTryEntry),!e)for(var t in this)"t"===t.charAt(0)&&s.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=u)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(r){if(this.done)throw r;var n=this;function handle(e,t){return o.type="throw",o.arg=r,n.next=e,t&&(n.method="next",n.arg=u),!!t}for(var e=this.tryEntries.length-1;0<=e;--e){var t=this.tryEntries[e],o=t.completion;if("root"===t.tryLoc)return handle("end");if(t.tryLoc<=this.prev){var i=s.call(t,"catchLoc"),a=s.call(t,"finallyLoc");if(i&&a){if(this.prev<t.catchLoc)return handle(t.catchLoc,!0);if(this.prev<t.finallyLoc)return handle(t.finallyLoc)}else if(i){if(this.prev<t.catchLoc)return handle(t.catchLoc,!0)}else{if(!a)throw new Error("try statement without catch or finally");if(this.prev<t.finallyLoc)return handle(t.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;0<=r;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&s.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;resetTryEntry(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:values(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=u),h}},i}(e.exports);try{regeneratorRuntime=n}catch(e){Function("r","regeneratorRuntime = r")(n)}},function(e,t,r){"use strict";function sd(e,t){n.apply(e,w(t)?t:[t])}function vd(e,t,r,n,o,i,a,u,s,c,l,f,p){var h=e;if("function"==typeof a?h=a(t,h):h instanceof Date?h=c(h):"comma"===r&&w(h)&&(h=h.join(",")),null===h){if(n)return i&&!f?i(t,_.encoder,p):t;h=""}if("string"==typeof h||"number"==typeof h||"boolean"==typeof h||g.isBuffer(h))return i?[l(f?t:i(t,_.encoder,p))+"="+l(i(h,_.encoder,p))]:[l(t)+"="+l(String(h))];var y,d=[];if(void 0===h)return d;if(w(a))y=a;else{var v=Object.keys(h);y=u?v.sort(u):v}for(var m=0;m<y.length;++m){var b=y[m];o&&null===h[b]||(w(h)?sd(d,vd(h[b],"function"==typeof r?r(t,b):t,r,n,o,i,a,u,s,c,l,f,p)):sd(d,vd(h[b],t+(s?"."+b:"["+b+"]"),r,n,o,i,a,u,s,c,l,f,p)))}return d}var g=r(0),p=r(1),h=Object.prototype.hasOwnProperty,y={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},w=Array.isArray,n=Array.prototype.push,o=Date.prototype.toISOString,_={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:g.encode,encodeValuesOnly:!1,formatter:p.formatters[p.default],indices:!1,serializeDate:function(e){return o.call(e)},skipNulls:!1,strictNullHandling:!1};e.exports=function(e,t){var r,n=e,o=function(e){if(!e)return _;if(null!==e.encoder&&void 0!==e.encoder&&"function"!=typeof e.encoder)throw new TypeError("Encoder has to be a function.");var t=e.charset||_.charset;if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var r=p.default;if(void 0!==e.format){if(!h.call(p.formatters,e.format))throw new TypeError("Unknown format option provided.");r=e.format}var n=p.formatters[r],o=_.filter;return"function"!=typeof e.filter&&!w(e.filter)||(o=e.filter),{addQueryPrefix:"boolean"==typeof e.addQueryPrefix?e.addQueryPrefix:_.addQueryPrefix,allowDots:void 0===e.allowDots?_.allowDots:!!e.allowDots,charset:t,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:_.charsetSentinel,delimiter:void 0===e.delimiter?_.delimiter:e.delimiter,encode:"boolean"==typeof e.encode?e.encode:_.encode,encoder:"function"==typeof e.encoder?e.encoder:_.encoder,encodeValuesOnly:"boolean"==typeof e.encodeValuesOnly?e.encodeValuesOnly:_.encodeValuesOnly,filter:o,formatter:n,serializeDate:"function"==typeof e.serializeDate?e.serializeDate:_.serializeDate,skipNulls:"boolean"==typeof e.skipNulls?e.skipNulls:_.skipNulls,sort:"function"==typeof e.sort?e.sort:null,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:_.strictNullHandling}}(t);"function"==typeof o.filter?n=(0,o.filter)("",n):w(o.filter)&&(r=o.filter);var i,a=[];if("object"!=typeof n||null===n)return"";i=t&&t.arrayFormat in y?t.arrayFormat:t&&"indices"in t?t.indices?"indices":"repeat":"indices";var u=y[i];r=r||Object.keys(n),o.sort&&r.sort(o.sort);for(var s=0;s<r.length;++s){var c=r[s];o.skipNulls&&null===n[c]||sd(a,vd(n[c],c,u,o.strictNullHandling,o.skipNulls,o.encode?o.encoder:null,o.filter,o.sort,o.allowDots,o.serializeDate,o.formatter,o.encodeValuesOnly,o.charset))}var l=a.join(o.delimiter),f=!0===o.addQueryPrefix?"?":"";return o.charsetSentinel&&("iso-8859-1"===o.charset?f+="utf8=%26%2310003%3B&":f+="utf8=%E2%9C%93&"),0<l.length?f+l:""}},function(e,t,r){"use strict";function ze(e,t,r){if(e){var n=r.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,o=/(\[[^[\]]*])/g,i=/(\[[^[\]]*])/.exec(n),a=i?n.slice(0,i.index):n,u=[];if(a){if(!r.plainObjects&&d.call(Object.prototype,a)&&!r.allowPrototypes)return;u.push(a)}for(var s=0;null!==(i=o.exec(n))&&s<r.depth;){if(s+=1,!r.plainObjects&&d.call(Object.prototype,i[1].slice(1,-1))&&!r.allowPrototypes)return;u.push(i[1])}return i&&u.push("["+n.slice(i.index)+"]"),function(e,t,r){for(var n=t,o=e.length-1;0<=o;--o){var i,a=e[o];if("[]"===a&&r.parseArrays)i=[].concat(n);else{i=r.plainObjects?Object.create(null):{};var u="["===a.charAt(0)&&"]"===a.charAt(a.length-1)?a.slice(1,-1):a,s=parseInt(u,10);r.parseArrays||""!==u?!isNaN(s)&&a!==u&&String(s)===u&&0<=s&&r.parseArrays&&s<=r.arrayLimit?(i=[])[s]=n:i[u]=n:i={0:n}}n=i}return n}(u,t,r)}}var y=r(0),d=Object.prototype.hasOwnProperty,v={allowDots:!1,allowPrototypes:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:y.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1};e.exports=function(e,t){var r=function(e){if(!e)return v;if(null!==e.decoder&&void 0!==e.decoder&&"function"!=typeof e.decoder)throw new TypeError("Decoder has to be a function.");if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new Error("The charset option must be either utf-8, iso-8859-1, or undefined");var t=void 0===e.charset?v.charset:e.charset;return{allowDots:void 0===e.allowDots?v.allowDots:!!e.allowDots,allowPrototypes:"boolean"==typeof e.allowPrototypes?e.allowPrototypes:v.allowPrototypes,arrayLimit:"number"==typeof e.arrayLimit?e.arrayLimit:v.arrayLimit,charset:t,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:v.charsetSentinel,comma:"boolean"==typeof e.comma?e.comma:v.comma,decoder:"function"==typeof e.decoder?e.decoder:v.decoder,delimiter:"string"==typeof e.delimiter||y.isRegExp(e.delimiter)?e.delimiter:v.delimiter,depth:"number"==typeof e.depth?e.depth:v.depth,ignoreQueryPrefix:!0===e.ignoreQueryPrefix,interpretNumericEntities:"boolean"==typeof e.interpretNumericEntities?e.interpretNumericEntities:v.interpretNumericEntities,parameterLimit:"number"==typeof e.parameterLimit?e.parameterLimit:v.parameterLimit,parseArrays:!1!==e.parseArrays,plainObjects:"boolean"==typeof e.plainObjects?e.plainObjects:v.plainObjects,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:v.strictNullHandling}}(t);if(""===e||null==e)return r.plainObjects?Object.create(null):{};for(var n="string"==typeof e?function(e,t){var r,n={},o=t.ignoreQueryPrefix?e.replace(/^\?/,""):e,i=t.parameterLimit===1/0?void 0:t.parameterLimit,a=o.split(t.delimiter,i),u=-1,s=t.charset;if(t.charsetSentinel)for(r=0;r<a.length;++r)0===a[r].indexOf("utf8=")&&("utf8=%E2%9C%93"===a[r]?s="utf-8":"utf8=%26%2310003%3B"===a[r]&&(s="iso-8859-1"),u=r,r=a.length);for(r=0;r<a.length;++r)if(r!==u){var c,l,f=a[r],p=f.indexOf("]="),h=-1===p?f.indexOf("="):p+1;(l=-1===h?(c=t.decoder(f,v.decoder,s),t.strictNullHandling?null:""):(c=t.decoder(f.slice(0,h),v.decoder,s),t.decoder(f.slice(h+1),v.decoder,s)))&&t.interpretNumericEntities&&"iso-8859-1"===s&&(l=l.replace(/&#(\d+);/g,function(e,t){return String.fromCharCode(parseInt(t,10))})),l&&t.comma&&-1<l.indexOf(",")&&(l=l.split(",")),d.call(n,c)?n[c]=y.combine(n[c],l):n[c]=l}return n}(e,r):e,o=r.plainObjects?Object.create(null):{},i=Object.keys(n),a=0;a<i.length;++a){var u=i[a],s=ze(u,n[u],r);o=y.merge(o,s,r)}return y.compact(o)}},function(e,t,r){"use strict";r.r(t);r(4);function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ownKeys(t,e){var r=Object.keys(t);return Object.getOwnPropertySymbols&&r.push.apply(r,Object.getOwnPropertySymbols(t)),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(r,!0).forEach(function(e){_defineProperty(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ownKeys(r).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var n={resultsFormat:"native"},o=function(){function State(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,State),this.siteId=e,this.setDefault(t),this.params=_objectSpread({},this.defaultParams),this.filters=[],this.sorting={}}return function(e,t,r){t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r)}(State,[{key:"compareFilterRanges",value:function(e,t){return e[0]==t[0]&&e[1]==t[1]}},{key:"compareFilterValues",value:function(e,t){var r=Array.isArray(e),n=Array.isArray(t);return r&&n?this.compareFilterRanges(e,t):!r&&!n&&e==t}},{key:"outputFilters",value:function(){return this.filters.reduce(function(e,t){var r="".concat(t.type,".").concat(t.field);return Array.isArray(t.value)?_objectSpread({},e,{},null!=t.value[0]&&_defineProperty({},"".concat(r,".low"),t.value[0]),{},null!=t.value[1]&&_defineProperty({},"".concat(r,".high"),t.value[1])):(e[r]=e[r]||[],e[r].push(t.value),e)},{})}},{key:"outputSort",value:function(){if(this.sorting.field&&this.sorting.direction)return _defineProperty({},"sort.".concat(this.sorting.field),this.sorting.direction)}},{key:"transformFilterType",value:function(e){return e?"bgfilter":"filter"}},{key:"addFilter",value:function(e,t,r){var n=2<arguments.length&&void 0!==r&&r;if(null==e)throw new TypeError("[SSAPI][State].addFilter - `field` is undefined.");if(null==t)throw new TypeError("[SSAPI][State].addFilter - `value` is undefined.");var o={field:e,value:t,type:this.transformFilterType(n)};return this.filters.push(o),this}},{key:"removeFilter",value:function(t,r,e){var n=this,o=2<arguments.length&&void 0!==e&&e;if(null==t)throw new TypeError("[SSAPI][State].removeFilter - `field` is undefined.");if(null==r)throw new TypeError("[SSAPI][State].removeFilter - `value` is undefined.");var i=this.transformFilterType(o);return this.filters=this.filters.filter(function(e){return!(e.field==t&&e.type==i&&n.compareFilterValues(e.value,r))}),this}},{key:"toggleFilter",value:function(t,r,e){var n=this,o=2<arguments.length&&void 0!==e&&e;if(null==t)throw new TypeError("[SSAPI][State].toggleFilter - `field` is undefined.");if(null==r)throw new TypeError("[SSAPI][State].toggleFilter - `value` is undefined.");var i=this.transformFilterType(o);return this.filters.find(function(e){return e.field==t&&e.type==i&&n.compareFilterValues(e.value,r)})?this.removeFilter(t,r,o):this.addFilter(t,r,o)}},{key:"query",value:function(e){return this.params.q=e,this}},{key:"perPage",value:function(e){return this.params.resultsPerPage=e,this}},{key:"page",value:function(e){return this.params.page=e,this}},{key:"sort",value:function(e,t){var r=1<arguments.length&&void 0!==t?t:"asc";if(null==e)throw new TypeError('[SSAPI][State].sort - "field" is undefined.');return this.sorting={field:e,direction:r},this}},{key:"setDefault",value:function(e){var t=0<arguments.length&&void 0!==e?e:{};if("object"!=_typeof(t))throw new TypeError("[SSAPI][State].setDefault - `passedDefaultParams` is not an object");return this.defaultParams=_objectSpread({siteId:this.siteId},n,{},t),this}},{key:"lock",value:function(){return this.defaultParams=_objectSpread({},this.params),this}},{key:"reset",value:function(){return this.params=_objectSpread({},this.defaultParams),this.filters=[],this.sorting={},this}},{key:"clearFacets",value:function(){return this.filters=[],this}},{key:"output",value:function(){return _objectSpread({},this.params,{},this.outputFilters(),{},this.outputSort())}}]),State}(),i=r(2),a=r.n(i);function RequestCache_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Request_typeof(e){return(Request_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Request_ownKeys(t,e){var r=Object.keys(t);return Object.getOwnPropertySymbols&&r.push.apply(r,Object.getOwnPropertySymbols(t)),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r}function Request_objectSpread(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Request_ownKeys(r,!0).forEach(function(e){Request_defineProperty(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Request_ownKeys(r).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function Request_defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Request_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var u=new(function(){function RequestCache(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1e3;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,RequestCache),this.store=new Map,this.throttleTime=e}return function(e,t,r){t&&RequestCache_defineProperties(e.prototype,t),r&&RequestCache_defineProperties(e,r)}(RequestCache,[{key:"access",value:function(e){var t=this.store.get(e);if(t){var r=Date.now();return t.timestamp-r>this.throttleTime?this.remove(e):t.data}return null}},{key:"insert",value:function(e,t){var r={timestamp:Date.now(),data:t};return this.store.set(e,r),!0}},{key:"purge",value:function(){return this.store.clear(),!0}},{key:"remove",value:function(e){return this.store.delete(e)}}]),RequestCache}())(3e4),s=function(){function Request(e,t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Request),this.endpoint=e,this.method=t,this.params=r}return function(e,t,r){t&&Request_defineProperties(e.prototype,t),r&&Request_defineProperties(e,r)}(Request,[{key:"serializeParams",value:function(e){return a.a.stringify(e,{arrayFormat:"repeat"})}},{key:"buildUrl",value:function(e,t){return-1<e.indexOf("?")?"".concat(e).concat(t):"".concat(e,"?").concat(t)}},{key:"send",value:function(){var a=this;return new Promise(function(t,r){var n=a.serializeParams(Request_objectSpread({},a.params)),o=a.buildUrl(a.endpoint,n),e=u.access(o);if(null!=e)return t(e);var i=new XMLHttpRequest;i.open("GET",o),i.responseType="json",i.send(),i.onreadystatechange=function(){if(4==i.readyState)if(200==i.status){var e={response:{status:i.status,responseURL:i.responseURL,responseType:i.responseType,data:"object"==Request_typeof(i.response)?i.response:JSON.parse(i.response)},requestParams:Request_objectSpread({},a.params),requestQueryString:n};u.insert(o,e),t(e)}else console.error("[SSAPI][Request].send - Error with response.","Code: ".concat(i.status,".")),r(i)}})}}]),Request}();function asyncGeneratorStep(e,t,r,n,o,i,a){try{var u=e[i](a),s=u.value}catch(e){return void r(e)}u.done?t(s):Promise.resolve(s).then(n,o)}function Client_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var c="search",l=function(){function Client(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Client),null==e)throw new TypeError("[SSAPI][Client] - `siteId` is undefined.");this.state=new o(e,t),this.endpoint="https://api.searchspring.net/api/search/search.json",this.method="GET",this.events=function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}({},c,function(){})}var e;return function(e,t,r){t&&Client_defineProperties(e.prototype,t),r&&Client_defineProperties(e,r)}(Client,[{key:"search",value:(e=function(i){return function(){var e=this,o=arguments;return new Promise(function(t,r){var n=i.apply(e,o);function _next(e){asyncGeneratorStep(n,t,r,_next,_throw,"next",e)}function _throw(e){asyncGeneratorStep(n,t,r,_next,_throw,"throw",e)}_next(void 0)})}}(regeneratorRuntime.mark(function _callee(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new s(this.endpoint,this.method,this.state.output()).send();case 2:return t=e.sent,this.events[c](t.response.data,t.response,t.requestParams),e.abrupt("return",t);case 5:case"end":return e.stop()}},_callee,this)})),function(){return e.apply(this,arguments)})},{key:"on",value:function(e,t){if("function"!=typeof this.events[e])throw new Error('[SSAPI][Client].on - Event "'.concat(e,'" does not exist.'));this.events[e]=t}},{key:"reset",value:function(){return this.state.reset(),this}},{key:"clearFacets",value:function(){return this.state.clearFacets(),this}},{key:"setDefault",value:function(e){return this.state.setDefault(e),this}},{key:"lock",value:function(){return this.state.lock(),this}},{key:"perPage",value:function(e){return this.state.perPage(e),this}},{key:"page",value:function(e){return this.state.page(e),this}},{key:"sort",value:function(e,t){return this.state.sort(e,t),this}},{key:"filter",value:function(e,t){return this.state.page(1).toggleFilter(e,t,!1),this}},{key:"backgroundFilter",value:function(e,t){return this.state.page(1).toggleFilter(e,t,!0),this}},{key:"query",value:function(e){return this.state.query(e),this}}]),Client}();r.d(t,"Client",function(){return l})}],__webpack_require__.c=n,__webpack_require__.d=function(e,t,r){__webpack_require__.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},__webpack_require__.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.t=function(t,e){if(1&e&&(t=__webpack_require__(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(__webpack_require__.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)__webpack_require__.d(r,n,function(e){return t[e]}.bind(null,n));return r},__webpack_require__.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return __webpack_require__.d(t,"a",t),t},__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=3);function __webpack_require__(e){if(n[e])return n[e].exports;var t=n[e]={i:e,l:!1,exports:{}};return r[e].call(t.exports,t,t.exports,__webpack_require__),t.l=!0,t.exports}var r,n});
//# sourceMappingURL=ssapi-wrapper.js.map